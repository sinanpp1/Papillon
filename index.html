<!DOCTYPE html><html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sinan'ın Çarkı</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: pink;
            font-family: Arial, sans-serif;
        }
        canvas {
            border: 5px solid #333;
            border-radius: 50%;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        h2 {
            margin-top: 20px;
            color: #333;
        }
    </style>
</head>
<body><canvas id="wheel" width="400" height="400"></canvas>

<div class="pointer" style="width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent; border-bottom: 30px solid red; margin-top: -20px;"></div>
<button onclick="spinWheel()">Çevir</button>
<h2 id="result"></h2><audio id="tickSound" src="https://www.soundjay.com/button/beep-07.wav"></audio>

<script>
    const options = [
        'Sinan\'ın kucağında uyu',
        'Sinan\'ı öp',
        'Sinan\'ı döv',
        'Sinan senin koynunda uyusun',
        'Sinan\'a seni seviyorum de',
        'Sinan ile evlen',
        'Sinan\'a söv'
    ];

    const colors = ['#ff4d4d', '#4d79ff', '#4dff4d', '#ffa64d', '#ff4da6', '#4dffff', '#b84dff'];
    const canvas = document.getElementById('wheel');
    const ctx = canvas.getContext('2d');
    const tickSound = document.getElementById('tickSound');
    const result = document.getElementById('result');

    let startAngle = 0;
    let spinning = false;
    let anglePerSlice = (2 * Math.PI) / options.length;

    function drawWheel() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        for (let i = 0; i < options.length; i++) {
            const angle = startAngle + i * anglePerSlice;

            // Draw slice
            ctx.beginPath();
            ctx.moveTo(200, 200);
            ctx.arc(200, 200, 200, angle, angle + anglePerSlice);
            ctx.fillStyle = colors[i % colors.length];
            ctx.fill();
            ctx.stroke();

            // Draw text
            ctx.save();
            ctx.translate(200, 200);
            ctx.rotate(angle + anglePerSlice / 2);
            ctx.textAlign = 'center';
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.fillText(options[i], 120, 0); // Yazılar daha içte ve tam görünür
            ctx.restore();
        }
    }

    drawWheel();

    function spinWheel() {
        if (spinning) return;
        spinning = true;
        result.innerText = '';

        let spinAngle = Math.floor(Math.random() * 360) + 1080; // En az 3 tur dönsün
        let currentSpin = 0;
        let spinSpeed = 20;

        const spinInterval = setInterval(() => {
            currentSpin += spinSpeed;
            startAngle += (spinSpeed * Math.PI) / 180;
            drawWheel();
            tickSound.play();

            if (currentSpin >= spinAngle) {
                clearInterval(spinInterval);
                spinning = false;
                let degrees = (startAngle * 180 / Math.PI) % 360;
                let index = Math.floor((360 - degrees + 90) % 360 / (360 / options.length));
                result.innerText = `Seçilen: ${options[index]}`;
            }
        }, 50);
    }
</script></body>
</html>
